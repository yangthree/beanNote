# 咖啡豆记录小程序 PRD_v1

版本：v1.0  
状态：草案（可迭代）  
适用端：微信小程序  
配色基调：浅米白+浅灰为主背景，浅咖啡色强调（参考 `#F9F7F5` / `#D6B58F`）  

## 1. 产品目标
- 帮助用户随手记录与管理日常咖啡豆（手冲/意式）信息、冲煮参数与主观评分，形成可检索的个人「豆单」。  
- 提供统一的页面风格与极简表单，降低记录门槛，提高复盘效率。  

## 2. 用户与场景
- 用户画像：咖啡爱好者、家庭玩家、入门店家；日常尝试不同豆子并复盘。  
- 核心场景：
  - 在家或咖啡店购买/试饮后，快速新增一条记录（名称、品牌、烘焙度、产地、冲煮参数、评分、风味标签）。
  - 在列表中按名称/品牌/产地搜索、按类型/评分筛选，回看历史记录。  

## 3. 术语与类型
- 豆类型：`手冲`（pourOver）、`意式`（espresso）。  
- 评分：1.0～5.0，步进 0.5（展示时保留 1 位小数）。  
- 风味标签：自由输入或从常用集合中选择（后续可做推荐与补全）。  

## 4. 信息架构（IA）
- Tab
  - 我的豆单（首页列表）
  - 冲煮记录（预留）
  - 发现（预留）
  - 我的（预留）
- 我的豆单
  - 列表（卡片式，两列栅格）
  - 搜索（名称/品牌/产地/风味）
  - 筛选（类型/品牌/最低评分）
  - 新建入口（悬浮 +）
- 新建/编辑
  - 手冲豆（本 PRD 主体）
  - 意式豆（参考附件原型，功能对齐）

## 5. 关键流程
1) 新建记录（手冲示例）  
首页 → 悬浮 + → 进入「新建手冲豆」 → 输入基础信息 → 输入冲煮参数 → 可选风味/设备/备注 → 保存 → 返回首页刷新。  

2) 查看/编辑记录  
首页卡片点击 → 详情（v1 可直接进入编辑页）→ 修改 → 保存。  

3) 删除记录  
首页卡片长按 → 操作菜单：删除 → 二次确认 → 删除并刷新列表。  

## 6. 页面规格

### 6.1 我的豆单（首页）
参考原型《我的豆单首页原型图.png》与当前代码样式。
- 结构
  - 标题栏：左文案、右侧设置（占位，v1 可不实现）
  - 搜索框：占位文案「搜索我的咖啡豆…」，圆角 40rpx，高 80rpx，左侧图标
  - 列表：两列卡片（等宽，卡片圆角 20rpx，图片 280rpx 高，内容区 24rpx 内边距）
  - 悬浮按钮：右下角圆形 +，带阴影
- 卡片信息（最密展示）
  - 封面：图片（无图显示 ☕ 占位）
  - 名称（最多 2 行省略）
  - 品牌（单行省略、次级灰）
  - 标签：类型（手冲/意式）、烘焙度
  - 评分：星+数值（xx.x）
  - 底部信息：产地、日期（yy-mm-dd）
- 交互
  - 点击卡片：进入编辑/详情
  - 长按卡片：弹出删除菜单
  - 搜索：输入即过滤（名称/品牌/产地/风味标签）
- 空状态
  - 居中提示文字与引导文案，建议引导点击 + 新建

### 6.2 新建手冲豆（本页）
参考原型《新建意式豆记录.png》与《assets/prd/新建手冲豆原型图.svg》。
- 顶部：返回、标题「新建手冲豆」、保存按钮
- 模块与字段
  - 基本信息
    - 咖啡豆名称 input（必填，1～40 字）
    - 品牌 input（选填，0～30 字）
    - 评分 number / step(0.5) / range(1.0~5.0)（选填）
    - 烘焙度 picker（浅烘/中浅烘/中烘/中深烘/深烘）（选填）
    - 产地 input（选填，0～30 字）
  - 手冲专属冲煮参数
    - 粉量 number（g，选填，0～200，保留 1 位小数）
    - 水量 number（ml，选填，0～1000，保留 0～1 位小数）
    - 水温 number（°C，选填，70～100）
    - 时间 number（s，选填，0～600）
    - 研磨度 input（选填，0～30 字；示例「EK 7.5 / 中粗」）
  - 风味标签 tags
    - 可输入新增 / 从常用项选择（如：花香、柑橘、果酸、坚果…）
  - 设备信息
    - 滤杯 / 壶具 input（选填）
    - 磨豆机刻度 input（选填）
  - 备注 textarea（0～300 字）
- 底部主按钮：「保存记录」
- 成功反馈：Toast「保存成功」并返回上一页/首页刷新

### 6.3 新建意式豆（对齐说明）
- 字段集参考现有原型：
  - 基本信息一致
  - 意式专属参数：粉量（g）、出品量（g）、时间（s）、研磨度
  - 风味评分（可选 v1 简化为综合评分；v2 可细分苦味/酸度/平衡/厚度 1-5）
  - 备注与设备同手冲

## 7. 数据结构（本地存储）
同现有 `utils/dataModel.js`，补充分段：  
```ts
// 公共字段
id: string
type: 'pourOver' | 'espresso'
name: string
brand?: string
roastLevel?: string
origin?: string
flavors?: string[]
notes?: string
rating?: number         // 0~5, step 0.5
coverImage?: string
createdAt: ISOString
updatedAt: ISOString

// 手冲
brewParams?: {
  coffeeWeight?: number     // g
  waterWeight?: number      // ml
  temperature?: number      // °C
  time?: number             // s
  grindSize?: string
  device?: string           // 滤杯/壶具，扩展字段（v1 可并入备注或设备信息）
}

// 意式
extractParams?: {
  coffeeWeight?: number     // g
  outputWeight?: number     // g
  time?: number             // s
  grindSize?: string
}

// 可选：细分风味评分（v2）
flavorScores?: {
  bitterness?: number
  acidity?: number
  balance?: number
  body?: number
}
```

## 8. 交互与校验规则
- 必填：`name`。保存时如为空，提示「请输入咖啡豆名称」。  
- 长度：名称 ≤40，品牌/产地/研磨度 ≤30，备注 ≤300。  
- 数字边界：
  - 评分 1.0～5.0（0.5 步进，展示 1 位小数）
  - 粉量 0～200g，水量 0～1000ml，水温 70～100°C，时间 0～600s（不满足则提示并阻止保存）
- 列表日期：显示 `yy-mm-dd`（后两位年份）。  
- 删除：二次确认弹窗。  
- 空状态：提供引导文案与按钮。  

## 9. 状态与异常
- 无数据：空态展示，悬浮 + 始终可用。  
- 权限/存储失败：Toast 通知并建议重试。  
- 图片加载失败：使用 ☕ 占位。  

## 10. 性能与非功能
- 本地存储（`wx.setStorageSync`）；列表渲染 ≤ 200 条无明显卡顿。  
- 启动页与页面切换 ≤ 300ms（视资源而定）。  
- 适配 iPhone 小屏；字体 28～36rpx，触控区 ≥ 88rpx。  

## 11. 埋点（v1 可选）
- 事件：新建_手冲保存、删除记录、搜索、点击卡片、长按删除、筛选变更。  
- 维度：记录类型、评分区间、是否填写完整参数。  

## 12. 里程碑
1) v1（当前）
   - 我的豆单列表 + 搜索/删除
   - 新建/编辑：手冲、意式
   - 本地存储 + 简单校验  
2) v1.1
   - 图片上传、品牌/烘焙度字典管理、风味标签推荐  
3) v2.0
   - 云端同步、账号体系、数据统计报表、冲煮曲线记录

## 13. 视觉规范（摘取）
- **主背景**：`#F9F7F5`（浅米白，营造轻盈暖调）；局部分段可使用更浅的中性灰 `#F2EFEB` 作分隔。  
- **卡片/输入背景**：`#FFFFFF`，边框颜色 `#E5DED4`，默认阴影 `0 4rpx 12rpx rgba(0,0,0,0.08)`。  
- **强调 / 互动色**：`#D6B58F`（浅咖啡色）。用于  
  - 选中 tab / 标签背景  
  - 输入框聚焦边框  
  - 底部主按钮、悬浮加号、保存按钮  
  - 星级评分图标、重要图标高亮  
- **文字色**：主文字 `#333333`，次级/占位 `#888888`，禁用 `#C0B6AA`。  
- **图标风格**：线性或填充均采用浅咖色或深灰，保持扁平、单色调感。  
- **圆角**：输入/按钮 16rpx，卡片 20rpx，FAB 圆形。  
- **动效**：按钮/卡片按压缩放 0.98，颜色加深 10%。  

## 14. 可交互原型（参考）
- `assets/prd/新建手冲豆原型图.svg`（高分辨率矢量）。  

---
本文档基于两张参考原型整理，若字段或交互需微调，请标注版本差异，我将同步更新 PRD_v1。 


