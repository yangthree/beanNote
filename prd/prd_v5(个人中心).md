项目名称： 小豆记（CoffeeNote）小程序 模块名称： 个人中心（我的） 版本号： V1.0 日期： 2024年5月15日 作者： Gemini (AI UX/产品设计师)

一、项目背景
当前“小豆记”小程序已成功搭建了咖啡豆记录、手冲/意式参数记录等核心功能，深受用户喜爱。然而，随着用户深入使用，我们收到反馈，现有功能在用户常用设备的便捷管理和咖啡豆库存的精细化追踪方面存在空白。

具体来说，用户期待能够：

快速管理和选择常用冲煮工具（咖啡机、磨豆机等），避免在每次记录冲煮参数时重复输入，提升效率。
精细化管理自身咖啡豆库存，包括剩余克数、即将用完的提醒、豆子的分类与消耗记录，以便更好地掌握咖啡豆的使用状况。
为响应用户需求，并进一步提升“小豆记”的实用性和用户粘性，我们决定在小程序底部导航中新增一个独立的**「我的」Tab**，该Tab将作为用户个人功能集合的中心，承载设备管理、库存管理以及未来的其他个人设置功能。

二、目标用户 & 使用场景
🎯 目标用户
资深咖啡爱好者： 拥有多套固定冲煮设备（如手冲壶、磨豆机、意式咖啡机等），追求精细化冲煮体验的用户。
咖啡豆消耗量较大用户： 经常购买和更换不同种类咖啡豆，需要有效记录库存消耗和管理多款豆子的用户。
数据记录偏好者： 喜欢追踪咖啡豆使用情况，如剩余量、开袋日期、消耗速度等，以便更好地规划购买和冲煮计划的用户。
📌 使用场景
场景1：新增设备
触发： 用户购买了新的磨豆机，希望将其添加到App中，以便下次记录手冲或意式参数时能够快速选择。
操作： 进入「我的」→「常用冲煮设备」→ 点击“＋”→ 填写设备信息并保存。
场景2：录入新豆库存
触发： 用户刚开了一袋新购买的咖啡豆，希望录入库存信息，包括烘焙日期、总重量等。
操作： 进入「我的」→「豆子库存管理」→ 点击“＋”→ 填写豆子库存信息并保存。
场景3：记录冲煮时选择常用设备
触发： 用户正在记录一次手冲或意式咖啡的冲煮参数，希望直接带入已记录的常用咖啡机和磨豆机刻度。
操作： 在「新增手冲/意式豆」页面，点击“咖啡机器”或“磨豆机刻度”字段，从常用设备列表中选择。
场景4：查看即将用完的咖啡豆
触发： 用户想知道哪些咖啡豆快用完了，以便提前采购。
操作： 进入「我的」→「豆子库存管理」→ 查看库存列表中的“即将用完”标识或筛选。
场景5：快速了解豆子概况
触发： 用户想快速查看自己手头豆子的种类、烘焙程度和剩余克数。
操作： 进入「我的」→「豆子库存管理」→ 浏览库存列表。
场景6：记录咖啡豆消耗
触发： 用户冲了一杯咖啡，消耗了一部分咖啡豆，想更新库存的剩余量。
操作： 进入「我的」→「豆子库存管理」→ 点击具体豆子进入详情 → 点击“记录消耗”或直接编辑“剩余重量”。
三、整体信息架构
底部Tab：我的
 ├─ 个人信息（头像、昵称、登录入口）
 ├─ 常用冲煮设备 (一级入口)
 │    ├─ 常用冲煮设备列表 (页面)
 │    │    ├─ 手冲设备 (分组)
 │    │    ├─ 意式设备 (分组)
 │    │    ├─ 磨豆机 (分组)
 │    │    └─ 其他设备 (分组)
 │    └─ 新增/编辑设备 (页面)
 │
 └─ 豆子库存管理 (一级入口)
      ├─ 库存列表 (页面)
      │    ├─ 在库 (Tab)
      │    └─ 已用完 (Tab)
      ├─ 新增库存 (页面)
      └─ 库存详情 (页面)
           ├─ 编辑豆子信息 (操作)
           ├─ 记录消耗 (操作)
           └─ 标记为已用完 (操作)
四、核心功能需求
4.1 Tab：我的（主页面）
4.1.1 功能描述
作为“小豆记”小程序的底部导航新增Tab，提供一个集中的入口，汇聚用户的个人相关功能，包括设备管理、库存管理以及未来扩展的个人设置。页面风格延续App的现代、浅色调与柔和咖啡元素。

4.1.2 UI 信息结构 & 约束布局 (Mobile - iPhone 8)
页面背景: F9F7F5 (浅米白色)。
顶部区域 - 用户信息:
头像: 页面顶部左侧，圆形占位区域，显示微信授权的头像。尺寸约 48x48dp。
昵称/登录入口: 头像右侧。
未登录状态: 显示“微信授权登录”文本，颜色 #333333，字号适中。
已登录状态: 显示微信昵称，颜色 #333333，字号略大，加粗。
布局: 头像与昵称/登录入口水平居中对齐，与屏幕左右边缘保持适当内边距（例如 16-20dp），与页面顶部保持一定间距。
主要功能入口 (列表形式):
两个主要的点击区域，呈列表项样式，各自占据一行。
样式: 采用圆角矩形卡片或简洁列表项（背景色 #FFFFFF，细微阴影/描边）。
左侧: 中文文本标题，例如“常用冲煮设备”、“豆子库存管理”，颜色 #333333，字号适中。
右侧: 简洁的右箭头图标 (">")，颜色 #888888。
布局: 垂直排列，与屏幕左右边缘保持内边距，列表项之间有适当间距。
底部导航: 无（「我的」即为底部Tab之一，不包含其内部的底部导航）。
4.1.3 交互说明
未登录状态: 点击“微信授权登录”区域，触发微信小程序授权登录流程。
已登录状态:
点击“常用冲煮设备”列表项，跳转至「常用冲煮设备列表」页。
点击“豆子库存管理”列表项，跳转至「豆子库存列表」页。
所有点击操作均伴随平滑的页面过渡动画。
4.2 常用冲煮设备管理
4.2.1 功能目标
允许用户创建、查看、编辑和删除自己常用的各类咖啡冲煮相关设备。
支持将同类设备设为“默认”，便于在记录手冲/意式参数时自动带入或快速选择。
提升记录冲煮参数时的用户体验和效率。
4.2.2 数据结构（建议）
{
  "id": "device_uuid_001",
  "userId": "user_openid_xxx", // 绑定用户ID
  "type": "espresso | pour_over | grinder | kettle | other", // 设备类型
  "name": "小飞鹰 640S", // 设备名称
  "brand": "飞鹰", // 品牌
  "model": "640S", // 型号
  "isDefault": false, // 是否设为默认设备
  "createTime": 1678886400000, // 创建时间戳
  "updateTime": 1678886400000 // 更新时间戳
}
4.2.3 页面结构 & 约束布局
(1) 页面：常用冲煮设备列表

页面背景: F9F7F5 (浅米白色)。
顶部标题: 居中显示“常用冲煮设备”，颜色 #333333。左侧“<”返回按钮。
右上角“＋”按钮: 页面右上角，圆形或方形图标按钮（“＋”图标），尺寸适中，颜色 #D6B58F。点击跳转至「新增/编辑设备」页（新增模式）。
设备列表:
分组: 设备列表按 type 字段进行分组（“手冲设备”、“意式设备”、“磨豆机”、“其他”），每个分组有独立的中文小标题，颜色 #333333，字号略小，加粗。
设备卡片/列表项: 每个设备在列表中显示为一个圆角矩形卡片或列表项。
样式: 背景色 #FFFFFF，带有细微阴影/描边，与左右边缘保持内边距。
内容:
设备名称: 文本，颜色 #333333，字号适中，加粗。
品牌 & 型号: 文本，颜色 #888888，字号较小，与设备名称平铺或下方显示。
默认标识: 如果 isDefault 为 true，显示一个简洁的中文标签“默认”或小图标（例如小星星），使用浅咖啡强调色 (#D6B58F)。
右侧: 右箭头图标 (">")，颜色 #888888，点击进入该设备的「新增/编辑设备」页（编辑模式）。
(2) 页面：新增/编辑设备

页面背景: F9F7F5 (浅米白色)。
顶部标题: 居中显示“新增设备”或“编辑设备”，颜色 #333333。左侧“<”返回按钮，右侧“保存”按钮。
表单字段:
所有字段布局为一行一输入框（或多行文本框），输入框采用现代扁平或描边风格，圆角设计，背景浅色，聚焦时边框为浅咖啡强调色 (#D6B58F)。
设备类型: 底部弹出式选择器，提供“手冲设备”、“意式设备”、“磨豆机”、“其他”选项。必填。
品牌: 文本输入框，带中文占位符“例如：Fellow”。必填。
名称: 文本输入框，带中文占位符“例如：Ode Gen2”。必填。
型号: 文本输入框，带中文占位符“选填”。非必填。
是否设为默认设备: 开关控件（Toggle Switch），默认关闭。非必填。 旁有中文提示“将同类型设备设为默认”。
底部固定“保存”按钮: 全宽或与内容区域同宽，背景色 #D6B590，文字白色“保存”，圆角。点击触发保存操作。
4.2.4 交互逻辑
新建设备:
用户点击「常用冲煮设备列表」页右上角“＋”，进入「新增/编辑设备」页。
填写字段后点击“保存”，设备自动加入对应分类，并刷新列表。
设为默认:
如果用户勾选“是否设为默认设备”开关，系统需检查同类型设备中是否存在其他默认设备。
若存在: 弹出确认弹窗“同类设备只能有一个默认，是否将当前设备设为默认并取消原默认设备的默认状态？”用户确认后，更新默认状态。
若不存在: 直接将当前设备设为默认。
编辑设备:
点击列表中的设备项，进入「新增/编辑设备」页（编辑模式），预填当前设备信息。
允许修改品牌、名称、型号、默认设备状态。
点击“保存”更新信息并返回列表。
删除设备:
在「新增/编辑设备」页（编辑模式），可能提供“删除”按钮（危险操作，颜色为红色）。
点击后弹出二次确认弹窗“确定要删除该设备吗？”，用户确认后删除设备并返回列表。
4.2.5 非功能性要求
数据缓存: 设备列表数据需支持本地缓存，减少每次打开页面的云请求，提升加载速度。
用户维度关联: 所有设备数据必须与用户OpenID绑定，确保数据私有性和准确性。
输入校验: 对必填字段进行非空校验；对文本输入长度进行限制。
4.3 豆子库存管理
4.3.1 功能目标
提供用户友好的咖啡豆库存录入、查看、编辑和消耗记录功能。
支持按“在库”和“已用完”进行分类管理。
提供“即将用完”提醒，辅助用户及时补货。
消耗记录可与冲煮记录关联（未来增强）。
4.3.2 数据结构（建议）
{
  "id": "bean_stock_uuid_001",
  "userId": "user_openid_xxx", // 绑定用户ID
  "name": "耶加雪菲 花魁", // 豆子名称
  "brand": "BeanHouse", // 品牌（可新增，用于列表展示）
  "roastLevel": "浅烘焙", // 烘焙程度
  "origin": "埃塞俄比亚", // 产区
  "totalWeight": 250, // 总重量 (g)
  "currentWeight": 180, // 剩余重量 (g)
  "roastDate": "2024-11-10", // 烘焙日期 (YYYY-MM-DD)
  "openDate": "2024-11-12", // 开袋日期 (YYYY-MM-DD), 可选
  "status": "in_stock | finished | near_empty", // 库存状态: 在库 | 已用完 | 即将用完 (≤20g)
  "notes": "此批次风味偏柑橘与茉莉香", // 备注信息（可包含口感评价）
  "createTime": 1678886400000,
  "updateTime": 1678886400000
}
4.3.3 页面结构 & 约束布局
(1) 页面：库存列表页

页面背景: F9F7F5 (浅米白色)。
顶部标题: 居中显示“豆子库存管理”，颜色 #333333。左侧“<”返回按钮。
右上角“＋”按钮: 页面右上角，圆形或方形图标按钮（“＋”图标），尺寸适中，颜色 #D6B58F。点击跳转至「新增库存」页。
顶部标签切换:
样式: 位于标题下方，水平居中。胶囊形状的Tab切换，例如“[在库]”、“[已用完]”。未选中时背景浅灰，文字 #888888。选中时背景柔和浅咖啡色 (#D6B58F)，文字白色。
布局: 切换区域与屏幕左右边缘有适当间距，Tab之间有固定间距。
豆子库存卡片列表:
布局模式: 瀑布流或网格布局，每行 2 列卡片，卡片之间保持均匀间距。
卡片容器: 圆角矩形（例如 8-12dp 圆角），背景色 #FFFFFF，带有细微的阴影或描边。
卡片内容布局 (自上而下):
顶部图片区: 默认图片（抽象咖啡豆图标）或用户上传的豆袋图。
豆子名称: 文本，颜色 #333333，字号略大，加粗。
品牌 & 烘焙程度: 文本，颜色 #888888，字号适中，平铺或下方显示。
剩余量: 文本“剩余：xxx g”，颜色 #333333，字号适中，加粗。
提醒标识: 如果 currentWeight <= 20g 且 status == in_stock，在剩余量旁边或独立一行显示**“即将用完”**标签，使用醒目但柔和的颜色（例如浅橙色或浅红色，配白色文字）。
烘焙日期: 文本“烘焙日期：YYYY-MM-DD”，颜色 #888888，字号较小。
开袋日期: 文本“开袋日期：YYYY-MM-DD”，颜色 #888888，字号较小。
交互: 点击卡片任何区域，跳转至「库存详情页」。
(2) 页面：库存详情页

页面背景: F9F7F5 (浅米白色)。
顶部标题: 居中显示“库存详情”，颜色 #333333。左侧“<”返回按钮。
右上角“编辑”按钮: 页面右上角，铅笔图标按钮，颜色 #D6B58F。点击跳转至「新增库存」页（编辑模式）。
豆子信息展示区 (卡片分组):
多个圆角矩形卡片或分组区域，背景色 #FFFFFF，带有细微阴影/描边。
基本信息卡片:
显示“品牌”、“产区”、“烘焙程度”、“豆子名称”等固定文本信息。
可能包含豆袋封面图（如果用户上传）。
重量信息卡片:
“总重量：xxx g” (固定显示)。
“剩余重量：xxx g” (可编辑，点击数字区域弹出数值输入键盘)。
可能包含一个进度条/环形图，可视化剩余重量比例。
日期信息卡片:
“烘焙日期：YYYY-MM-DD” (固定显示)。
“开袋日期：YYYY-MM-DD” (固定显示)。
备注信息卡片:
标题“我的笔记”，下方显示备注文本。
操作区域 (底部浮动或固定按钮):
记录消耗按钮: 底部浮动按钮或与“标记为已用完”平铺。背景色 #D6B58F，文字白色“记录消耗”。点击弹出小弹窗，允许用户输入消耗克数，自动扣减库存。
标记为已用完按钮: 底部浮动按钮或与“记录消耗”平铺。背景色 #888888 (或较浅的灰色)，文字白色“标记为已用完”。点击弹出二次确认弹窗，确认后将库存状态设为 finished。
(3) 页面：新增库存页

页面背景: F9F7F5 (浅米白色)。
顶部标题: 居中显示“新增库存”或“编辑库存”，颜色 #333333。左侧“<”返回按钮，右侧“保存”按钮。
表单字段:
所有字段布局为一行一输入框（或日期选择器），输入框采用现代扁平或描边风格，圆角设计，背景浅色，聚焦时边框为浅咖啡强调色 (#D6B58F)。
豆子名称: 文本输入框，带中文占位符。必填。
品牌: 文本输入框，带中文占位符。非必填。
烘焙程度: 底部弹出式选择器，提供“浅烘”、“中烘”、“深烘”选项。必填。
产区: 文本输入框，带中文占位符。非必填。
总重量（g）: 数字输入框，带单位“g”。必填。
剩余重量（g）: 数字输入框，默认值等于总重量。带单位“g”。必填。
烘焙日期: 日期选择器（弹出式日历），默认当前日期或空。必填。
开袋日期: 日期选择器（弹出式日历），默认空。非必填。
备注: 多行文本输入框，带中文占位符，可用于记录口感评价。非必填。
底部固定“保存”按钮: 全宽或与内容区域同宽，背景色 #D6B58F，文字白色“保存”，圆角。点击触发保存操作。
4.3.4 用量记录（可选增强）
功能描述: 在「库存详情页」或直接在「库存列表页」的卡片上，提供一个快速入口，允许用户快速输入“消耗 xx 克”。
交互: 用户输入克数后，自动从 currentWeight 中扣减，并更新库存。同时，可以弹出简短的成功提示。

五、用户流程图（简化）
graph TD
    A[用户点击底部Tab '我的'] --> B{个人中心首页}
    B --> C[点击 '常用冲煮设备']
    C --> C1[常用冲煮设备列表]
    C1 -- 点击 '+' --> C2[新增/编辑设备 (新增)]
    C1 -- 点击设备 --> C3[新增/编辑设备 (编辑)]
    C3 -- 点击 '删除' --> C4{二次确认弹窗}
    C4 -- 确认 --> C1
    C2 -- 点击 '保存' --> C1
    C3 -- 点击 '保存' --> C1

    B --> D[点击 '豆子库存管理']
    D --> D1[库存列表]
    D1 -- 点击 '在库' / '已用完' Tab --> D1_Refresh[刷新列表]
    D1 -- 点击 '+' --> D2[新增库存页]
    D1 -- 点击豆子卡片 --> D3[库存详情页]
    D2 -- 点击 '保存' --> D1
    D3 -- 点击 '编辑豆子信息' --> D2_Edit[新增库存页 (编辑)]
    D2_Edit -- 点击 '保存' --> D3
    D3 -- 点击 '记录消耗' --> D3_Consume[弹出消耗输入]
    D3_Consume -- 确认 --> D3_Refresh[更新剩余量并刷新]
    D3 -- 点击 '标记为已用完' --> D3_Finish[弹出确认标记]
    D3_Finish -- 确认 --> D1_Refresh_Finished[将豆子移至'已用完'列表]
这份PRD全面覆盖了“个人中心（我的）”模块的各个方面，从背景、目标到具体的功能和UI/UX细节，并融入了您App的特色风格。希望这份文档能为您的产品开发提供有力支持！